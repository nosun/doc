## wifi模块固件测试

	version v1.0.5
	date	2015-03-17
	author  nosun

### 主要改动
- 过去分包的分隔符为 \0 在多键值对分隔，以及包结尾均使用，分包只能通过plen来进行，如果mcu法宝频繁，会造成wifi模块处理不过来，发包时粘包的情况，经过讨论，多键值对分隔符仍然使用\0，包的结束符使用\n表示，\n不计入长度计算。

### 0x01

App向wifi模块发出登录请求，wifi模块汇报给App mcu的信息，因此向Mcu下发查询mcu信息指令

	AA 00 01 01 0A 

Mcu向wifi上报登录信息

	AA 00 2F 01 76 69 64 3a 3a 31 00 70 69 64 3a 3a 72 73 64 30 31 00 70 6b 65 79 3a 3a 31 32 33 34 35 00 64 73 6e 3a 3a 30 00 75 73 72 76 65 72 3a 3a 31 0a

### 0x02

App 下发命令 	{"data"["power::on"],"cmd":"download","sn":12}
	
	串口收到 AA 00 0A 02 70 6F 77 65 72 3A 3A 6F 6E 0A  plen 10 不包含结束符 0A

### 0x03

Mcu上报给wifi设备的状态信息
	
	power::00  包含命令号 一共10 个字符

	Hex 码 AA 00 0A 03 70 6F 77 65 72 3A 3A 6F 6E 0A

状态上报，测试结果，<span style="color:red">不通过</span>，一方面服务器和局域网并未收到上报的数据，另一方面，不知道为什么mcu反倒收到一些信息。如下：

	AA 00 0A 03 50 4F 57 45 52 3A 3A 4F 4E 0A 0D 2B 45 52 52 3D 2D 31 0D 0A 0D 0A 

### 0x04
	略

### 0x05
	略

### 0x06

	查询设备的运行状态，Wifi下发 AA 00 01 06 0A
	Mcu回复 03指令，上报所有状态。 

### 粘包测试

	年报测试ok，10ms每次连续发，看没有粘包现象


### bug
测试过程中测出一个bug，当plen 中出现长度0a的时候，就会导致分包错误，后来修改了程序，判断在每个包体的地方进行分包。

